<h1>Line Workers</h1>

<h3><%= @location_plan.name %></h3>

<ul class="nav nav-tabs" role="tablist">
  <% Shift::LINE_WORKERS.each do |k, v| -%>
    <li><a href="#<%= k %>" role="tab" data-toggle="tab"><%= v %></a></li>
  <% end -%>
</ul>

<div class="tab-content">
  <% Shift::LINE_WORKERS.each do |k, v| -%>
    <% next if k == :manager %>
    <% rule = LifeCycle.first.policy("#{k}_policy") %>

    <div class="tab-pane" id="<%= k %>">
      <table class="table">
        <tr>
          <th>Doctor shift - Rule: <%= rule.to_s.humanize %></th>
        </tr>
        <% @location_plan.chosen_grade.shifts.for_day(@day).each do |shift| -%>
          <tr>
            <td><%= time_span shift.starts_at, shift.ends_at %></td>
            <td>
              <% LifeCycle.generate_shifts(rule, shift.starts_at, shift.ends_at).each do |lw| -%>
                <%= time_span lw.starts_at, lw.ends_at %><br>
              <% end -%>
            </td>
          </tr>
        <% end -%>
      </table>
    </div>
    <% end -%>
</div>

