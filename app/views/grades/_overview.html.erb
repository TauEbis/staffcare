<%= render 'grades/header' %>
<div data-bind="if: loaded">
<div class="row month-grades">

  <div class="col-sm-4">

    <h5 class="pull-right"><%= life_cycle_diff(@location_plan) %>
      <span data-toggle="tooltip" title="<%= life_cycle_tool_tip(@location_plan) %>">
        <span class="glyphicon glyphicon-question-sign"></span>
      </span>
    </h5>
    <h5 class="text-center"><span data-bind="text: grade_hours()"></span><small> (<span data-bind="text: month_stats().wages"></span>)</small></h5>

    <h5 class="text-left"><small>Efficiency grades:</small></h5>

    <%- if !@grade.optimizer? -%>
    <row class="clearfix">
      <h5 class="pull-left compressed"><small>Vs. Optimized:</small></h5>
      <h5 data-bind="with: grade_opt_diff" class="text-right compressed">
        <span data-bind="text: diffFormat(hours(), false), css: diffClass( hours())" ></span>
      </h5>
    </row>
    <%- end -%>
    <row>
      <h5 class="pull-left text-left compressed" data-bind="if: $root.diff_grade_hours"><small>Vs. Last:</small></h5>
      <h5 class="text-right compressed" data-bind="if: $root.diff_grade_hours">
        <span data-bind="text: diffFormat($root.diff_grade_hours(), false), css: diffClass($root.diff_grade_hours())"></span>
      </h5>
    </row>
  </div>

  <div data-bind="with: grade_points">
    <div class="col-sm-2 text-center">
      <h5><span data-bind="text: $root.month_stats().wait_time"></span> <small>wait mins</small></h5>
      <h5><span data-bind="text: $root.grade_letters().patient_sat()"></span> <small>(<span data-bind="text: toCurrency(patient_sat())"></span>)</small></h5>
      <%- if !@grade.optimizer? -%>
        <h5><span data-bind="text: diffFormat($root.grade_opt_diff().patient_sat()), css: diffClass( $root.grade_opt_diff().patient_sat())" ></span></h5>
      <%- end -%>
      <h5 data-bind="if: $root.diff_grade_points">
        <span data-bind="text: diffFormat($root.diff_grade_points().patient_sat()), css: diffClass($root.diff_grade_points().patient_sat())"></span>
      </h5>
    </div>
    <div class="col-sm-2 text-center">
      <h5><span data-bind="text: $root.month_stats().work_rate"></span> <small> pats per hr</small></h5>
      <h5><span data-bind="text: $root.grade_letters().md_sat()"></span> <small>(<span data-bind="text: toCurrency(md_sat())"></span>)</small></h5>
      <%- if !@grade.optimizer? -%>
        <h5><span data-bind="text: diffFormat($root.grade_opt_diff().md_sat()), css: diffClass( $root.grade_opt_diff().md_sat())" ></span></h5>
      <%- end -%>
      <h5 data-bind="if: $root.diff_grade_points">
        <span data-bind="text: diffFormat($root.diff_grade_points().md_sat()), css: diffClass($root.diff_grade_points().md_sat())"></span>
      </h5>
    </div>
    <div class="col-sm-2 text-center">
      <h5><span data-bind="text: $root.month_stats().wasted_time()"></span> <small> wasted mins</small></h5>
      <h5><span data-bind="text: $root.grade_letters().cost()"></span> <small>(<span data-bind="text: toCurrency(cost())"></span>)</small></h5>
      <%- if !@grade.optimizer? -%>
        <h5><span data-bind="text: diffFormat($root.grade_opt_diff().cost()), css: diffClass( $root.grade_opt_diff().cost())" ></span></h5>
      <%- end -%>
      <h5 data-bind="if: $root.diff_grade_points">
        <span data-bind="text: diffFormat($root.diff_grade_points().cost()), css: diffClass($root.diff_grade_points().cost())"></span>
      </h5>
    </div>
    <div class="col-sm-2 text-center">
      <h5><span data-bind="text: $root.month_stats().pen_per_pat"></span> <small> waste per pat</small></h5>
      <h5><span data-bind="text: $root.grade_letters().total()"></span> <small>(<span data-bind="text: toCurrency(total())"></span>)</small></h5>
      <%- if !@grade.optimizer? -%>
        <h5><span data-bind="text: diffFormat($root.grade_opt_diff().total()), css: diffClass( $root.grade_opt_diff().total())" ></span></h5>
      <%- end -%>
      <h5 data-bind="if: $root.diff_grade_points">
        <span data-bind="text: diffFormat($root.diff_grade_points().total()), css: diffClass($root.diff_grade_points().total())">
        </h5>
      </div>
    </div>
  </div>
</div>
</div>
